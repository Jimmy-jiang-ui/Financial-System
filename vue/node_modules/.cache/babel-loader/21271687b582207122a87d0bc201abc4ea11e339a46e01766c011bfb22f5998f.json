{"ast":null,"code":"export default {\n  data() {\n    return {\n      bannerList: [],\n      categoryList: [],\n      category: null,\n      tableData: [],\n      // 所有的数据\n      pageNum: 1,\n      // 当前的页码\n      pageSize: 5,\n      // 每页显示的个数\n      total: 0,\n      hotNewsList: [],\n      video: {},\n      videoList: []\n    };\n  },\n  mounted() {\n    this.loadBanner();\n    this.loadCategory();\n    this.load(1);\n    this.loadHot();\n    this.loadVideo(null);\n  },\n  // methods：本页面所有的点击事件或者其他函数定义区\n  methods: {\n    loadVideo(item) {\n      this.$request.get('/video/selectPage', {\n        params: {\n          pageNum: 1\n        }\n      }).then(res => {\n        this.videoList = res.data?.list || [];\n        if (item) {\n          this.video = item;\n        } else {\n          this.video = this.videoList.length ? this.videoList[0] : {};\n        }\n      });\n    },\n    loadHot() {\n      this.$request.get('/news/selectHot').then(res => [this.hotNewsList = res.data || []]);\n    },\n    loadBanner() {\n      this.$request.get('/banner/selectAll').then(res => [this.bannerList = res.data || []]);\n    },\n    loadCategory() {\n      this.$request.get('/category/selectAll').then(res => [this.categoryList = res.data || []]);\n    },\n    loadCategoryNews(name) {\n      this.category = name;\n      this.load(1);\n    },\n    load(pageNum) {\n      // 分页查询\n      if (pageNum) this.pageNum = pageNum;\n      this.$request.get('/news/selectPageForAll', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          category: this.category\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.tableData = res.data?.list;\n          this.total = res.data?.total;\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum);\n    }\n  }\n};","map":{"version":3,"names":["data","bannerList","categoryList","category","tableData","pageNum","pageSize","total","hotNewsList","video","videoList","mounted","loadBanner","loadCategory","load","loadHot","loadVideo","methods","item","$request","get","params","then","res","list","length","loadCategoryNews","name","code","$message","error","msg","handleCurrentChange"],"sources":["src/views/front/Home.vue"],"sourcesContent":["<template>\r\n    <div class=\"main-content\">\r\n        <div style=\"display: flex; grid-gap: 20px\">\r\n            <!-- 左侧热点部分开始-->\r\n            <div style=\"flex: 0 0 25%; max-width: 25%;\">\r\n                <div style=\"margin: 20px 0; background: #f8f8f8; padding: 15px; border-radius: 8px\">\r\n                    <div style=\"display: flex; align-items: left; margin-bottom: 15px\">\r\n                        <div style=\"accent-color: black\">社会快讯</div>\r\n                        <div style=\"flex: 1; text-align: right;\">\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <div @click=\"$router.push('/front/newsDetail?id=' + item.id)\" v-for=\"(item, index) in hotNewsList\" :key=\"item.id\"\r\n                             style=\"font-size: 14px; margin-bottom: 8px; cursor: pointer; color: #666\" class=\"line1\">\r\n                            <strong style=\"color: red; margin-right: 8px\" v-if=\"index < 3\">{{ index + 1 }}</strong>\r\n                            <strong style=\"color: #333; margin-right: 8px\" v-else>{{ index + 1 }}</strong>\r\n                            <span>{{ item.title }}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- 左侧热点部分结束-->\r\n            <!-- 中间内容部分开始-->\r\n            <div style=\"flex: 0 0 50%; max-width: 50%;\">\r\n                <el-carousel height=\"250px\">\r\n                    <el-carousel-item v-for=\"item in bannerList\" :key=\"item\">\r\n                        <a :href=\"'/front/newsDetail?id=' + item.newsId\" target=\"_blank\"><img :src=\"item.img\" alt=\"\" style=\"width: 100%\"></a>\r\n                    </el-carousel-item>\r\n                </el-carousel>\r\n                <div>\r\n                    <div style=\"margin: 20px 0; display: flex; flex-wrap: wrap; gap: 20px \">\r\n                        <!-- 分类按钮样式调整 -->\r\n                        <div @click=\"loadCategoryNews(null)\" class=\"category-item\" :class=\"{ 'category-item-active' : category === null }\">全部</div>\r\n                        <div @click=\"loadCategoryNews(item.name)\" class=\"category-item\" :class=\"{ 'category-item-active' : category === item.name }\" v-for=\"item in categoryList\"\r\n                             :key=\"item.id\">{{ item.name }}</div>\r\n                    </div>\r\n                    <div>\r\n                        <div @click=\"$router.push('/front/newsDetail?id=' + item.id)\" class=\"card\" v-for=\"item in tableData\" :key=\"item.id\"\r\n                             style=\"display: flex; cursor: pointer; gap: 12px; margin-bottom: 10px; padding: 12px; background: #f8f8f8; border-radius: 8px;overflow: hidden;text-overflow: ellipsis;\">\r\n                            <img :src=\"item.img\" alt=\"\" style=\"width: 120px; height: 80px; border-radius: 5px; display: block\">\r\n                            <div style=\"flex: 1\">\r\n                                <div style=\"font-size: 16px; margin-bottom: 8px; font-weight: 500\" class=\"line1\">{{ item.title }}</div>\r\n                                <div style=\"color: #666; height: 36px; margin-bottom: 5px; font-size: 13px\" class=\"line2\">{{item.descr }}</div>\r\n                                <div style=\"color: #666; font-size: 12px\">\r\n                                    <span style=\"margin-right: 15px\"><i class=\"el-icon-time\"></i> {{ item.time }}</span>\r\n                                    <span><i class=\"el-icon-s-comment\"></i> {{item.commentCount}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div style=\"margin: 10px 0\" v-if=\"total > pageSize\">\r\n                        <el-pagination\r\n                                background\r\n                                @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"pageNum\"\r\n                                :page-sizes=\"[5, 10, 20]\"\r\n                                :page-size=\"pageSize\"\r\n                                layout=\"total, prev, pager, next\"\r\n                                :total=\"total\">\r\n                        </el-pagination>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- 中间内容部分结束-->\r\n            <!-- 右侧部分开始-->\r\n            <div style=\"flex: 0 0 25%; max-width: 25%;\">\r\n                <!-- 右侧热点榜样式调整 -->\r\n                <div style=\"margin-bottom: 25px; background: #f8f8f8; padding: 15px; border-radius: 8px\">\r\n                    <div style=\"display: flex; align-items: center; margin-bottom: 15px\">\r\n                        <img src=\"@/assets/imgs/hot.png\" alt=\"\" style=\"width: 50px\">\r\n                        <div style=\"flex: 1; text-align: right; \">\r\n                            <span @click=\"loadHot\" style=\"font-size: 14px; cursor: pointer\"><i class=\"el-icon-refresh\"></i> 换一换</span>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <div  @click=\"$router.push('/front/newsDetail?id=' + item.id)\" v-for=\"(item, index) in hotNewsList\" :key=\"item.id\"\r\n                              style=\"font-size: 14px; margin-bottom: 8px; cursor: pointer; color: #666\" class=\"line1\">\r\n                            <strong style=\"color: red; margin-right: 8px\" v-if=\"index < 3\">{{ index + 1 }}</strong>\r\n                            <strong style=\"color: #333; margin-right: 8px\" v-else>{{ index + 1 }}</strong>\r\n                            <span>{{ item.title }}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!-- 视频模块样式调整 -->\r\n                <div style=\"margin: 20px 0; background: #f8f8f8; padding: 15px; border-radius: 8px\">\r\n                    <div style=\"font-size: 18px; margin-bottom: 15px; font-weight: 500\">为您推荐</div>\r\n                    <div style=\"margin-bottom: 10px\">\r\n                        <video controls style=\"width: 100%; height: 180px; border-radius: 6px\" :src=\"video.file\"></video>\r\n                    </div>\r\n                    <div @click=\"loadVideo(item)\" v-for=\"item in videoList\" :key=\"item.id\" class=\"video-item\"\r\n                         :class=\"{'video-item-active': video.id === item.id}\" >\r\n                        <img src=\"@/assets/imgs/play.gif\" alt=\"\" style=\"width: 15px; margin-right: 10px\" v-if=\"video.id === item.id\">\r\n                        <span style=\"font-size: 13px\">{{ item.name }}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- 右侧部分结束-->\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            bannerList: [],\r\n            categoryList: [],\r\n            category: null,\r\n            tableData: [],  // 所有的数据\r\n            pageNum: 1,   // 当前的页码\r\n            pageSize: 5,  // 每页显示的个数\r\n            total: 0,\r\n            hotNewsList: [],\r\n            video: {},\r\n            videoList: []\r\n        }\r\n    },\r\n    mounted() {\r\n        this.loadBanner()\r\n        this.loadCategory()\r\n        this.load(1)\r\n        this.loadHot()\r\n        this.loadVideo(null)\r\n    },\r\n    // methods：本页面所有的点击事件或者其他函数定义区\r\n    methods: {\r\n        loadVideo(item) {\r\n            this.$request.get('/video/selectPage', {\r\n                params: {\r\n                    pageNum: 1\r\n                }\r\n            }).then(res => {\r\n                this.videoList = res.data?.list || []\r\n                if (item) {\r\n                    this.video = item\r\n                } else {\r\n                    this.video = this.videoList.length ? this.videoList[0] : {}\r\n                }\r\n            })\r\n        },\r\n        loadHot() {\r\n            this.$request.get('/news/selectHot').then(res => [\r\n                this.hotNewsList = res.data || []\r\n            ])\r\n        },\r\n        loadBanner() {\r\n            this.$request.get('/banner/selectAll').then(res => [\r\n                this.bannerList = res.data || []\r\n            ])\r\n        },\r\n        loadCategory() {\r\n            this.$request.get('/category/selectAll').then(res => [\r\n                this.categoryList = res.data || []\r\n            ])\r\n        },\r\n        loadCategoryNews(name) {\r\n            this.category = name\r\n            this.load(1)\r\n        },\r\n        load(pageNum) {  // 分页查询\r\n            if (pageNum) this.pageNum = pageNum\r\n            this.$request.get('/news/selectPageForAll', {\r\n                params: {\r\n                    pageNum: this.pageNum,\r\n                    pageSize: this.pageSize,\r\n                    category: this.category,\r\n                }\r\n            }).then(res => {\r\n                if (res.code === '200') {\r\n                    this.tableData = res.data?.list\r\n                    this.total = res.data?.total\r\n                } else {\r\n                    this.$message.error(res.msg)\r\n                }\r\n            })\r\n        },\r\n        handleCurrentChange(pageNum) {\r\n            this.load(pageNum)\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.category-item {\r\n    border: 1px solid gray;\r\n    color: black;\r\n    padding: 4px 8px;\r\n    border-radius: 4px;\r\n    font-size: 13px;\r\n    transition: all 0.3s;\r\n}\r\n.category-item-active {\r\n    background-color: darkred;\r\n    color: white;\r\n}\r\n.line1:hover {\r\n    color: red !important;\r\n}\r\n/* 调整视频条目样式 */\r\n.video-item {\r\n    margin-bottom: 8px;\r\n    padding: 6px;\r\n    border-radius: 4px;\r\n    transition: all 0.3s;\r\n}\r\n.video-item:hover {\r\n    background-color: #e8f4ff;\r\n}\r\n.video-item-active {\r\n    color: #409EFF;\r\n}\r\n</style>"],"mappings":"AAqGA;EACAA,KAAA;IACA;MACAC,UAAA;MACAC,YAAA;MACAC,QAAA;MACAC,SAAA;MAAA;MACAC,OAAA;MAAA;MACAC,QAAA;MAAA;MACAC,KAAA;MACAC,WAAA;MACAC,KAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,UAAA;IACA,KAAAC,YAAA;IACA,KAAAC,IAAA;IACA,KAAAC,OAAA;IACA,KAAAC,SAAA;EACA;EACA;EACAC,OAAA;IACAD,UAAAE,IAAA;MACA,KAAAC,QAAA,CAAAC,GAAA;QACAC,MAAA;UACAhB,OAAA;QACA;MACA,GAAAiB,IAAA,CAAAC,GAAA;QACA,KAAAb,SAAA,GAAAa,GAAA,CAAAvB,IAAA,EAAAwB,IAAA;QACA,IAAAN,IAAA;UACA,KAAAT,KAAA,GAAAS,IAAA;QACA;UACA,KAAAT,KAAA,QAAAC,SAAA,CAAAe,MAAA,QAAAf,SAAA;QACA;MACA;IACA;IACAK,QAAA;MACA,KAAAI,QAAA,CAAAC,GAAA,oBAAAE,IAAA,CAAAC,GAAA,KACA,KAAAf,WAAA,GAAAe,GAAA,CAAAvB,IAAA,OACA;IACA;IACAY,WAAA;MACA,KAAAO,QAAA,CAAAC,GAAA,sBAAAE,IAAA,CAAAC,GAAA,KACA,KAAAtB,UAAA,GAAAsB,GAAA,CAAAvB,IAAA,OACA;IACA;IACAa,aAAA;MACA,KAAAM,QAAA,CAAAC,GAAA,wBAAAE,IAAA,CAAAC,GAAA,KACA,KAAArB,YAAA,GAAAqB,GAAA,CAAAvB,IAAA,OACA;IACA;IACA0B,iBAAAC,IAAA;MACA,KAAAxB,QAAA,GAAAwB,IAAA;MACA,KAAAb,IAAA;IACA;IACAA,KAAAT,OAAA;MAAA;MACA,IAAAA,OAAA,OAAAA,OAAA,GAAAA,OAAA;MACA,KAAAc,QAAA,CAAAC,GAAA;QACAC,MAAA;UACAhB,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAH,QAAA,OAAAA;QACA;MACA,GAAAmB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAK,IAAA;UACA,KAAAxB,SAAA,GAAAmB,GAAA,CAAAvB,IAAA,EAAAwB,IAAA;UACA,KAAAjB,KAAA,GAAAgB,GAAA,CAAAvB,IAAA,EAAAO,KAAA;QACA;UACA,KAAAsB,QAAA,CAAAC,KAAA,CAAAP,GAAA,CAAAQ,GAAA;QACA;MACA;IACA;IACAC,oBAAA3B,OAAA;MACA,KAAAS,IAAA,CAAAT,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
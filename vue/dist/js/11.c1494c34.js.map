{"version":3,"file":"js/11.c1494c34.js","mappings":"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","sources":["webpack://vue/./src/views/front/QuestionDetail.vue","webpack://vue/src/views/front/QuestionDetail.vue","webpack://vue/./src/views/front/QuestionDetail.vue?4077","webpack://vue/./src/views/front/QuestionDetail.vue?0dd5"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"width\":\"50%\",\"margin\":\"10px auto\"}},[_c('div',{staticClass:\"card\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('div',{staticStyle:{\"font-size\":\"24px\",\"margin-bottom\":\"20px\"}},[_vm._v(_vm._s(_vm.question.title))]),_c('div',{staticStyle:{\"margin-bottom\":\"20px\",\"color\":\"#444\",\"font-size\":\"16px\"}},[_vm._v(_vm._s(_vm.question.descr))]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('div',{staticStyle:{\"flex\":\"1\",\"color\":\"#888\"}},[_c('span',{staticStyle:{\"margin-right\":\"20px\"}},[_vm._v(\"发布日期：\"+_vm._s(_vm.question.date))]),_c('span',[_vm._v(\"阅读量：\"+_vm._s(_vm.question.readCount))])]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"回答问题\")])],1)]),_c('div',{staticClass:\"card\"},[_c('div',{staticStyle:{\"font-size\":\"24px\",\"margin-bottom\":\"20px\"}},[_vm._v(\"回答列表 \"+_vm._s(_vm.total))]),_c('div',_vm._l((_vm.answerList),function(item){return _c('div',{key:item.id,staticStyle:{\"display\":\"flex\",\"grid-gap\":\"10px\",\"padding-bottom\":\"20px\",\"border-bottom\":\"1px solid #ddd\",\"margin-bottom\":\"20px\"}},[_c('div',{staticStyle:{\"color\":\"#666\",\"padding-top\":\"20px\",\"width\":\"60px\",\"cursor\":\"pointer\"}},[_c('i',{staticClass:\"el-icon-like\",staticStyle:{\"font-size\":\"20px\"}}),_vm._v(_vm._s(item.likesCount || 100))]),_c('div',{staticStyle:{\"flex\":\"1\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"grid-gap\":\"10px\",\"margin-bottom\":\"10px\"}},[_c('img',{staticStyle:{\"width\":\"50px\",\"height\":\"50px\",\"border-radius\":\"50%\"},attrs:{\"src\":item.userAvatar,\"alt\":\"\"}}),_c('div',{staticStyle:{\"color\":\"#888\"}},[_c('div',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(_vm._s(item.userName))]),_c('div',[_vm._v(_vm._s(item.time))])])]),_c('div',{staticClass:\"w-e-text\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(item.content)}})]),(item.userId === _vm.user.id)?_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('span',{staticStyle:{\"color\":\"#666\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.del(item.id)}}},[_c('i',{staticClass:\"el-icon-delete\"}),_vm._v(\"删除\")])]):_vm._e()])])}),0),_c('div',{staticStyle:{\"margin\":\"15px 0\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pageNum,\"page-sizes\":[5, 10, 20],\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"回答内容\",\"visible\":_vm.fromVisible,\"width\":\"50%\",\"close-on-click-modal\":false,\"destroy-on-close\":\"\"},on:{\"update:visible\":function($event){_vm.fromVisible=$event}}},[_c('el-form',{ref:\"formRef\",staticStyle:{\"padding-right\":\"50px\"},attrs:{\"model\":_vm.form,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"内容\",\"prop\":\"content\"}},[_c('div',{attrs:{\"id\":\"editor\"}})])],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.fromVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"确 定\")])],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div style=\"width: 50%; margin: 10px auto\">\r\n        <div class=\"card\" style=\"margin-bottom: 10px\">\r\n            <div style=\"font-size: 24px; margin-bottom: 20px\">{{ question.title }}</div>\r\n            <div style=\"margin-bottom: 20px; color: #444; font-size: 16px\">{{ question.descr }}</div>\r\n            <div style=\"display: flex\">\r\n                <div style=\"flex: 1; color: #888\">\r\n                    <span style=\"margin-right: 20px\">发布日期：{{ question.date }}</span>\r\n                    <span>阅读量：{{ question.readCount }}</span>\r\n                </div>\r\n                <el-button type=\"primary\" icon=\"el-icon-edit\" @click=\"handleAdd\">回答问题</el-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"card\">\r\n            <div style=\"font-size: 24px; margin-bottom: 20px\">回答列表 {{ total }}</div>\r\n            <div>\r\n                <div v-for=\"item in answerList\" :key=\"item.id\" style=\"display: flex; grid-gap: 10px; padding-bottom: 20px; border-bottom: 1px solid #ddd; margin-bottom: 20px\">\r\n                    <div style=\"color: #666; padding-top: 20px; width: 60px; cursor: pointer\"><i style=\"font-size: 20px\" class=\"el-icon-like\"></i>{{ item.likesCount || 100 }}</div>\r\n                    <div style=\"flex: 1;\">\r\n                        <div style=\"display: flex; grid-gap: 10px; margin-bottom: 10px\">\r\n                            <img :src=\"item.userAvatar\" alt=\"\" style=\"width: 50px; height: 50px; border-radius: 50%\">\r\n                            <div style=\"color: #888;\">\r\n                                <div style=\"margin-bottom: 10px\">{{ item.userName }}</div>\r\n                                <div>{{ item.time }}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"w-e-text\">\r\n                            <div v-html=\"item.content\"></div>\r\n                        </div>\r\n\r\n                        <div style=\"margin-top: 10px\" v-if=\"item.userId === user.id\">\r\n                            <span @click=\"del(item.id)\" style=\"color: #666; cursor: pointer\"><i class=\"el-icon-delete\"></i>删除</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div style=\"margin: 15px 0\">\r\n                <el-pagination\r\n                    background\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :current-page=\"pageNum\"\r\n                    :page-sizes=\"[5, 10, 20]\"\r\n                    :page-size=\"pageSize\"\r\n                    layout=\"total, prev, pager, next\"\r\n                    :total=\"total\">\r\n                </el-pagination>\r\n            </div>\r\n\r\n            <el-dialog title=\"回答内容\" :visible.sync=\"fromVisible\" width=\"50%\" :close-on-click-modal=\"false\" destroy-on-close>\r\n                <el-form :model=\"form\" label-width=\"100px\" style=\"padding-right: 50px\" ref=\"formRef\">\r\n                    <el-form-item label=\"内容\" prop=\"content\">\r\n                        <div id=\"editor\"></div>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <div slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"fromVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n                </div>\r\n            </el-dialog>\r\n\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport E from \"wangeditor\"\r\n\r\nexport default {\r\n    name: \"QuestionDetail\",\r\n    data() {\r\n        return {\r\n            id: this.$route.query.id,\r\n            question: {},\r\n            answerList: [],  // 所有的数据\r\n            pageNum: 1,   // 当前的页码\r\n            pageSize: 10,  // 每页显示的个数\r\n            total: 0,\r\n            form: {},\r\n            fromVisible: false,\r\n            editor: null,\r\n            user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n        }\r\n    },\r\n    created() {\r\n        this.$request.put('/question/updateCount/' + this.id).then(() => {\r\n            this.load()\r\n        })\r\n        this.loadAnswer(1)\r\n    },\r\n    methods: {\r\n        save() {   // 保存按钮触发的逻辑  它会触发新增或者更新\r\n            this.form.questionId = this.id\r\n            this.form.content = this.editor.txt.html()\r\n            this.$request.post('/answer/add', this.form).then(res => {\r\n                if (res.code === '200') {  // 表示成功保存\r\n                    this.$message.success('保存成功')\r\n                    this.loadAnswer(1)\r\n                    this.fromVisible = false\r\n                } else {\r\n                    this.$message.error(res.msg)  // 弹出错误的信息\r\n                }\r\n            })\r\n        },\r\n        handleAdd() {   // 新增数据\r\n            this.form = {}  // 新增数据的时候清空数据\r\n            this.fromVisible = true   // 打开弹窗\r\n            this.setRichText('')\r\n        },\r\n        loadAnswer(pageNum) {\r\n            if (pageNum) this.pageNum = pageNum\r\n            this.$request.get('/answer/selectFrontPage', {\r\n                params: {\r\n                    pageNum: this.pageNum,\r\n                    pageSize: this.pageSize,\r\n                    questionId: this.id\r\n                }\r\n            }).then(res => {\r\n                this.answerList = res.data?.list || []\r\n                this.total = res.data?.total || 0\r\n            })\r\n        },\r\n        load() {\r\n            this.$request.get('/question/selectById/' + this.id).then(res => {\r\n                this.question = res.data || {}\r\n            })\r\n        },\r\n        handleCurrentChange(pageNum) {\r\n            this.loadAnswer(pageNum)\r\n        },\r\n        setRichText(html) {\r\n            this.$nextTick(() => {\r\n                this.editor = new E(`#editor`)\r\n                this.editor.config.uploadImgServer = this.$baseUrl + '/files/editor/upload'\r\n                this.editor.config.uploadFileName = 'file'\r\n                this.editor.config.uploadImgHeaders = {\r\n                    token: this.user.token\r\n                }\r\n                this.editor.config.uploadImgParams = {\r\n                    type: 'img',\r\n                }\r\n                this.editor.config.zIndex = 0\r\n                this.editor.create()  // 创建\r\n                this.editor.txt.html(html)\r\n            })\r\n        },\r\n        del(id) {   // 单个删除\r\n            this.$confirm('您确定删除吗？', '确认删除', {type: \"warning\"}).then(response => {\r\n                this.$request.delete('/answer/delete/' + id).then(res => {\r\n                    if (res.code === '200') {   // 表示操作成功\r\n                        this.$message.success('操作成功')\r\n                        this.loadAnswer(1)\r\n                    } else {\r\n                        this.$message.error(res.msg)  // 弹出错误的信息\r\n                    }\r\n                })\r\n            }).catch(() => {\r\n            })\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QuestionDetail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QuestionDetail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./QuestionDetail.vue?vue&type=template&id=cfce4016&scoped=true\"\nimport script from \"./QuestionDetail.vue?vue&type=script&lang=js\"\nexport * from \"./QuestionDetail.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cfce4016\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","staticClass","_v","_s","question","title","descr","date","readCount","attrs","on","handleAdd","total","_l","answerList","item","key","id","likesCount","userAvatar","userName","time","domProps","content","userId","user","$event","del","_e","pageNum","pageSize","handleCurrentChange","fromVisible","ref","form","slot","save","staticRenderFns","name","data","$route","query","editor","JSON","parse","localStorage","getItem","created","$request","put","then","load","loadAnswer","methods","questionId","txt","html","post","res","code","$message","success","error","msg","setRichText","get","params","list","$nextTick","E","config","uploadImgServer","$baseUrl","uploadFileName","uploadImgHeaders","token","uploadImgParams","type","zIndex","create","$confirm","response","delete","catch","component"],"sourceRoot":""}
"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[11],{2011:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var s=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"50%",margin:"10px auto"}},[e("div",{staticClass:"card",staticStyle:{"margin-bottom":"10px"}},[e("div",{staticStyle:{"font-size":"24px","margin-bottom":"20px"}},[t._v(t._s(t.question.title))]),e("div",{staticStyle:{"margin-bottom":"20px",color:"#444","font-size":"16px"}},[t._v(t._s(t.question.descr))]),e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{flex:"1",color:"#888"}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("发布日期："+t._s(t.question.date))]),e("span",[t._v("阅读量："+t._s(t.question.readCount))])]),e("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleAdd}},[t._v("回答问题")])],1)]),e("div",{staticClass:"card"},[e("div",{staticStyle:{"font-size":"24px","margin-bottom":"20px"}},[t._v("回答列表 "+t._s(t.total))]),e("div",t._l(t.answerList,(function(i){return e("div",{key:i.id,staticStyle:{display:"flex","grid-gap":"10px","padding-bottom":"20px","border-bottom":"1px solid #ddd","margin-bottom":"20px"}},[e("div",{staticStyle:{color:"#666","padding-top":"20px",width:"60px",cursor:"pointer"}},[e("i",{staticClass:"el-icon-like",staticStyle:{"font-size":"20px"}}),t._v(t._s(i.likesCount||100))]),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{display:"flex","grid-gap":"10px","margin-bottom":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:i.userAvatar,alt:""}}),e("div",{staticStyle:{color:"#888"}},[e("div",{staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(i.userName))]),e("div",[t._v(t._s(i.time))])])]),e("div",{staticClass:"w-e-text"},[e("div",{domProps:{innerHTML:t._s(i.content)}})]),i.userId===t.user.id?e("div",{staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{color:"#666",cursor:"pointer"},on:{click:function(e){return t.del(i.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")])]):t._e()])])})),0),e("div",{staticStyle:{margin:"15px 0"}},[e("el-pagination",{attrs:{background:"","current-page":t.pageNum,"page-sizes":[5,10,20],"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{title:"回答内容",visible:t.fromVisible,width:"50%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.fromVisible=e}}},[e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"内容",prop:"content"}},[e("div",{attrs:{id:"editor"}})])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.fromVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)])},a=[],o=i(7438),r=i.n(o),l={name:"QuestionDetail",data(){return{id:this.$route.query.id,question:{},answerList:[],pageNum:1,pageSize:10,total:0,form:{},fromVisible:!1,editor:null,user:JSON.parse(localStorage.getItem("xm-user")||"{}")}},created(){this.$request.put("/question/updateCount/"+this.id).then((()=>{this.load()})),this.loadAnswer(1)},methods:{save(){this.form.questionId=this.id,this.form.content=this.editor.txt.html(),this.$request.post("/answer/add",this.form).then((t=>{"200"===t.code?(this.$message.success("保存成功"),this.loadAnswer(1),this.fromVisible=!1):this.$message.error(t.msg)}))},handleAdd(){this.form={},this.fromVisible=!0,this.setRichText("")},loadAnswer(t){t&&(this.pageNum=t),this.$request.get("/answer/selectFrontPage",{params:{pageNum:this.pageNum,pageSize:this.pageSize,questionId:this.id}}).then((t=>{this.answerList=t.data?.list||[],this.total=t.data?.total||0}))},load(){this.$request.get("/question/selectById/"+this.id).then((t=>{this.question=t.data||{}}))},handleCurrentChange(t){this.loadAnswer(t)},setRichText(t){this.$nextTick((()=>{this.editor=new(r())("#editor"),this.editor.config.uploadImgServer=this.$baseUrl+"/files/editor/upload",this.editor.config.uploadFileName="file",this.editor.config.uploadImgHeaders={token:this.user.token},this.editor.config.uploadImgParams={type:"img"},this.editor.config.zIndex=0,this.editor.create(),this.editor.txt.html(t)}))},del(t){this.$confirm("您确定删除吗？","确认删除",{type:"warning"}).then((e=>{this.$request.delete("/answer/delete/"+t).then((t=>{"200"===t.code?(this.$message.success("操作成功"),this.loadAnswer(1)):this.$message.error(t.msg)}))})).catch((()=>{}))}}},n=l,d=i(3736),c=(0,d.Z)(n,s,a,!1,null,"cfce4016",null),p=c.exports}}]);
//# sourceMappingURL=11.c1494c34.js.map